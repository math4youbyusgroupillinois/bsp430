<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>BSP430: include/bsp430/rtos/freertos.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSP430
   &#160;<span id="projectnumber">20141115</span>
   </div>
   <div id="projectbrief">Board Support Package for MSP430 microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_62ed61ea3473d085a8b2bf70053df4f0.html">include</a></li><li class="navelem"><a class="el" href="dir_7c92f3a74acfd272e55b8e8273858819.html">bsp430</a></li><li class="navelem"><a class="el" href="dir_065ffdf592468600cda1d1e899056772.html">rtos</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">freertos.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>BSP430 interface to FreeRTOS.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="core_8h_source.html">bsp430/core.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="clock_8h_source.html">bsp430/clock.h</a>&gt;</code><br />
</div>
<p><a href="freertos_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5d2f6d04ef026426df4a41876f6a6548"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="freertos_8h.html#a5d2f6d04ef026426df4a41876f6a6548">configBSP430_RTOS_FREERTOS</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a5d2f6d04ef026426df4a41876f6a6548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a318d7880d649db41bbd72f6d156b4c36"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="freertos_8h.html#a318d7880d649db41bbd72f6d156b4c36">configBSP430_FREERTOS_SCHEDULER</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a318d7880d649db41bbd72f6d156b4c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac539a316edadf394a897fb205ebee7ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="freertos_8h.html#ac539a316edadf394a897fb205ebee7ab">portACLK_FREQUENCY_HZ</a>&#160;&#160;&#160;(<a class="el" href="ucs_8h.html#a7a0cdc169aac90a5c877b3ca09a4608d">BSP430_CLOCK_LFXT1_IS_FAULTED_NI</a>() ? <a class="el" href="ucs_8h.html#ae2ace757e68c3bc4206f0ff4a3a39d13">BSP430_CLOCK_NOMINAL_VLOCLK_HZ</a> : <a class="el" href="clock_8h.html#a7edeacce320b73a2f7de5d2a865a2802">BSP430_CLOCK_NOMINAL_XT1CLK_HZ</a>)</td></tr>
<tr class="separator:ac539a316edadf394a897fb205ebee7ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a330dd41c7c537feca9d67c5aff49683b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="freertos_8h.html#a330dd41c7c537feca9d67c5aff49683b">configBSP430_HPL_TA0</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a330dd41c7c537feca9d67c5aff49683b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdbe916777e481f9efc3e4852554412a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="freertos_8h.html#afdbe916777e481f9efc3e4852554412a">configBSP430_HAL_TA0_CC0_ISR</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:afdbe916777e481f9efc3e4852554412a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8db1e70bdc8cf93804d249657ab137ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="freertos_8h.html#a8db1e70bdc8cf93804d249657ab137ab">vBSP430freertosSuspendScheduler</a> (void)</td></tr>
<tr class="separator:a8db1e70bdc8cf93804d249657ab137ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bb62b03fc2f793cb93b95c654eacce9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="freertos_8h.html#a9bb62b03fc2f793cb93b95c654eacce9">vBSP430freertosResumeScheduler</a> (void)</td></tr>
<tr class="separator:a9bb62b03fc2f793cb93b95c654eacce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>BSP430 interface to FreeRTOS. </p>
<p>More specifically, to the <a href="http://github.com/pabigot/freertos-mspgcc">BSP430-enabled FreeRTOS port supporting MSPGCC</a>. Other toolchains aren't intentionally excluded, they just aren't supported yet.</p>
<p>This header is not included by any BSP430 code, nor should it be directly included by application code. It is included by the freertos-mspgcc port of FreeRTOS via the <code>portmacro.h</code> header if <a class="el" href="freertos_8h.html#a5d2f6d04ef026426df4a41876f6a6548">configBSP430_RTOS_FREERTOS</a> is defined to a true value by the compilation environment. Doing this makes basic BSP430 configuration data available within FreeRTOS application code. Note that this inclusion occurs before FreeRTOS.h includes the application-specific FreeRTOSConfig.h, allowing this file to set defaults for the FreeRTOS port.</p>
<p>The <code>FreeRTOS.h</code> header is similarly included by <code><a class="el" href="core_8h.html" title="Common header included by all BSP430 leaf headers. ">bsp430/core.h</a></code> when <a class="el" href="freertos_8h.html#a5d2f6d04ef026426df4a41876f6a6548">configBSP430_RTOS_FREERTOS</a> is defined to a true value by the compilation environment. This ensures that the BSP430 infrastructure uses FreeRTOS-compatible mechanisms for critical sections and interrupt management.</p>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bsp430">http://github.com/pabigot/bsp430</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2012-2014, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a318d7880d649db41bbd72f6d156b4c36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define configBSP430_FREERTOS_SCHEDULER&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If defined to a true value, the FreeRTOS-BSP430 port.c file will use the BSP430 timer infrastructure on TA0 for the task scheduler. This requires that <a class="el" href="freertos_8h.html#a330dd41c7c537feca9d67c5aff49683b">configBSP430_HPL_TA0</a> be true and <a class="el" href="freertos_8h.html#afdbe916777e481f9efc3e4852554412a">configBSP430_HAL_TA0_CC0_ISR</a> be false. Use of this feature is compatible with <a class="el" href="uptime_8h.html#a9d11620036fe41e9f4fca30676e4d821">configBSP430_UPTIME</a>, and allows the FreeRTOS scheduler to co-exist with other users of TA0.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<a class="anchor" id="afdbe916777e481f9efc3e4852554412a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define configBSP430_HAL_TA0_CC0_ISR&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>FreeRTOS scheduler defines its own TA0 CC0 ISR.</p>
<dl class="section note"><dt>Note</dt><dd>If the setting here conflicts with a setting elsewhere, the compiler should generate a warning. </dd></dl>

</div>
</div>
<a class="anchor" id="a330dd41c7c537feca9d67c5aff49683b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define configBSP430_HPL_TA0&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>FreeRTOS scheduler requires use of TA0.</p>
<dl class="section note"><dt>Note</dt><dd>If the setting here conflicts with a setting elsewhere, the compiler should generate a warning. </dd></dl>

</div>
</div>
<a class="anchor" id="a5d2f6d04ef026426df4a41876f6a6548"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define configBSP430_RTOS_FREERTOS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark that BSP430 will be running under FreeRTOS.</p>
<p>Defining this macro to a true value externally to the system will: </p><ul>
<li>
<p class="startli">Cause the inclusion of <a class="el" href="core_8h.html" title="Common header included by all BSP430 leaf headers. ">bsp430/core.h</a> to also include "FreeRTOS.h", making available the standard FreeRTOS environment to BSP430 library code and defining RTOS-related macros to use the FreeRTOS implementation.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Cause the inclusion of "FreeRTOS.h" to include &lt;<a class="el" href="core_8h.html" title="Common header included by all BSP430 leaf headers. ">bsp430/core.h</a>&gt;, make standard BSP430 configuration data available to the FreeRTOS application code.</p>
<p class="endli"></p>
</li>
</ul>
<p>This cascading effect should be initiated by adding <code>-DconfigBSP430_RTOS_FREERTOS</code> to the <code>CPPFLAGS</code> variable during builds of FreeRTOS applications, including the BSP430 modules linked to the application.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<a class="anchor" id="ac539a316edadf394a897fb205ebee7ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define portACLK_FREQUENCY_HZ&#160;&#160;&#160;(<a class="el" href="ucs_8h.html#a7a0cdc169aac90a5c877b3ca09a4608d">BSP430_CLOCK_LFXT1_IS_FAULTED_NI</a>() ? <a class="el" href="ucs_8h.html#ae2ace757e68c3bc4206f0ff4a3a39d13">BSP430_CLOCK_NOMINAL_VLOCLK_HZ</a> : <a class="el" href="clock_8h.html#a7edeacce320b73a2f7de5d2a865a2802">BSP430_CLOCK_NOMINAL_XT1CLK_HZ</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The FreeRTOS-BSP430 port needs to know the rate at which the scheduler clock runs. This is normally ACLK, but whether ACLK is XT1CLK, VLOCLK, or some other frequency isn't really known.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Refine this</dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a9bb62b03fc2f793cb93b95c654eacce9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSP430freertosResumeScheduler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Invoke to resume the FreeRTOS scheduler.</p>
<p>This re-enables the task timeslice interrupt and schedules an interrupt after completion of a full timeslice.</p>
<p>The intent is that this be invoked after the application wakes up from a low power mode in which <a class="el" href="msp430_8h.html#a402257652efd4f64cdd1cfc95f9ed210">OSCOFF</a> was set.</p>
<dl class="section note"><dt>Note</dt><dd>This function is available only if <a class="el" href="freertos_8h.html#a318d7880d649db41bbd72f6d156b4c36">configBSP430_FREERTOS_SCHEDULER</a> is true. </dd></dl>

</div>
</div>
<a class="anchor" id="a8db1e70bdc8cf93804d249657ab137ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSP430freertosSuspendScheduler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Invoke to suspend the FreeRTOS scheduler.</p>
<p>This does not suspend any tasks, or prevent the scheduler from resuming the way vTaskEndScheduler does. It merely inhibits the task timeslice interrupt. The intent is that this be invoked prior to suspending the application in a low power mode that includes <a class="el" href="msp430_8h.html#a402257652efd4f64cdd1cfc95f9ed210">OSCOFF</a> (e.g., <a class="el" href="msp430_8h.html#a97eaedd508e6f77e34a49433f8e9e2eb">LPM4_bits</a>), if it is determined that no task is blocked on a tick-related event.</p>
<dl class="section note"><dt>Note</dt><dd>This function is available only if <a class="el" href="freertos_8h.html#a318d7880d649db41bbd72f6d156b4c36">configBSP430_FREERTOS_SCHEDULER</a> is true. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 15 2014 11:27:13 for BSP430 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
