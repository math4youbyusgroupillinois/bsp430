<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>BSP430: include/bsp430/periph/cs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSP430
   &#160;<span id="projectnumber">20141115</span>
   </div>
   <div id="projectbrief">Board Support Package for MSP430 microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_62ed61ea3473d085a8b2bf70053df4f0.html">include</a></li><li class="navelem"><a class="el" href="dir_7c92f3a74acfd272e55b8e8273858819.html">bsp430</a></li><li class="navelem"><a class="el" href="dir_19e4f19d9de152fbe2728cd5df77a8c2.html">periph</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">cs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Hardware presentation/abstraction for Clock System (CS).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="clock_8h_source.html">bsp430/clock.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="periph_8h_source.html">bsp430/periph.h</a>&gt;</code><br />
</div>
<p><a href="cs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a63edacf57e89b945f6edc332d26ee9de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#a63edacf57e89b945f6edc332d26ee9de">BSP430_CS_IS_FR58XX</a>&#160;&#160;&#160;(<a class="el" href="clock_8h.html#a10a2c6c45e481e819bcdf07125532f38">BSP430_PERIPH_CS_IS_CSA</a> - 0)</td></tr>
<tr class="separator:a63edacf57e89b945f6edc332d26ee9de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbd5b34e1678b069772c9087173b9305"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#adbd5b34e1678b069772c9087173b9305">BSP430_CS_IS_FR57XX</a>&#160;&#160;&#160;(defined(__MSP430_HAS_CS__) &amp;&amp; (! ((<a class="el" href="clock_8h.html#a10a2c6c45e481e819bcdf07125532f38">BSP430_PERIPH_CS_IS_CSA</a> - 0) || (<a class="el" href="clock_8h.html#a3f282e7d94c3ff64e727eb1c8135cb9d">BSP430_PERIPH_CS_IS_CS4</a> - 0))))</td></tr>
<tr class="separator:adbd5b34e1678b069772c9087173b9305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c04d4f7058250c4ab5c9d220a4234a0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#a6c04d4f7058250c4ab5c9d220a4234a0">BSP430_MODULE_CS</a>&#160;&#160;&#160;((<a class="el" href="cs_8h.html#adbd5b34e1678b069772c9087173b9305">BSP430_CS_IS_FR57XX</a> - 0) || (<a class="el" href="cs_8h.html#a63edacf57e89b945f6edc332d26ee9de">BSP430_CS_IS_FR58XX</a> - 0))</td></tr>
<tr class="separator:a6c04d4f7058250c4ab5c9d220a4234a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a975f44a73a1181b0fd58b353f0e49024"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#a975f44a73a1181b0fd58b353f0e49024">BSP430_CS_NOMINAL_MODCLK_HZ</a>&#160;&#160;&#160;5000000UL</td></tr>
<tr class="separator:a975f44a73a1181b0fd58b353f0e49024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8d8d8e53789714997a6ff5718836359"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#ac8d8d8e53789714997a6ff5718836359">BSP430_CS_NOMINAL_LFMODCLK_HZ</a>&#160;&#160;&#160;(<a class="el" href="cs_8h.html#a975f44a73a1181b0fd58b353f0e49024">BSP430_CS_NOMINAL_MODCLK_HZ</a> / 128)</td></tr>
<tr class="separator:ac8d8d8e53789714997a6ff5718836359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02a5d0ea0118facd7fb5d4a701a98b29"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#a02a5d0ea0118facd7fb5d4a701a98b29">BSP430_CS_LFXT1_IS_FAULTED_NI</a>()&#160;&#160;&#160;(CSCTL5 &amp; BSP430_CS_XT1OFFG_)</td></tr>
<tr class="separator:a02a5d0ea0118facd7fb5d4a701a98b29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1bbe0ef1757703626cd14953359be7e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#ac1bbe0ef1757703626cd14953359be7e">BSP430_CS_XT2_IS_FAULTED_NI</a>()&#160;&#160;&#160;(CSCTL5 &amp; BSP430_CS_XT2OFFG_)</td></tr>
<tr class="separator:ac1bbe0ef1757703626cd14953359be7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a0cdc169aac90a5c877b3ca09a4608d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#a7a0cdc169aac90a5c877b3ca09a4608d">BSP430_CLOCK_LFXT1_IS_FAULTED_NI</a>()&#160;&#160;&#160;((CSCTL4 &amp; BSP430_CS_XT1OFF_) || <a class="el" href="cs_8h.html#a02a5d0ea0118facd7fb5d4a701a98b29">BSP430_CS_LFXT1_IS_FAULTED_NI</a>())</td></tr>
<tr class="separator:a7a0cdc169aac90a5c877b3ca09a4608d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad464616a6b90463f1eae80399c34905"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#aad464616a6b90463f1eae80399c34905">BSP430_CLOCK_XT2_IS_FAULTED_NI</a>()&#160;&#160;&#160;((CSCTL4 &amp; BSP430_CS_XT2OFF_) || <a class="el" href="cs_8h.html#ac1bbe0ef1757703626cd14953359be7e">BSP430_CS_XT2_IS_FAULTED_NI</a>())</td></tr>
<tr class="separator:aad464616a6b90463f1eae80399c34905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a735f0669e36e96cad718a8c831a168cf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#a735f0669e36e96cad718a8c831a168cf">BSP430_CS_CLEAR_FAULTS_NI</a>()</td></tr>
<tr class="separator:a735f0669e36e96cad718a8c831a168cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a193ffc3b8d68bc1ec72dbeb887061af2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#a193ffc3b8d68bc1ec72dbeb887061af2">BSP430_CLOCK_CLEAR_FAULTS_NI</a>()</td></tr>
<tr class="separator:a193ffc3b8d68bc1ec72dbeb887061af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af26ee82669de3e3582ac7e66315fe58a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#af26ee82669de3e3582ac7e66315fe58a">BSP430_CS_FRAM_NWAITS_FOR_FREQ</a>(freq_)&#160;&#160;&#160;include &lt;bsp430/platform.h&gt;</td></tr>
<tr class="separator:af26ee82669de3e3582ac7e66315fe58a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2ace757e68c3bc4206f0ff4a3a39d13"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#ae2ace757e68c3bc4206f0ff4a3a39d13">BSP430_CLOCK_NOMINAL_VLOCLK_HZ</a>&#160;&#160;&#160;10000U</td></tr>
<tr class="separator:ae2ace757e68c3bc4206f0ff4a3a39d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24c49529cfa0ba1ada6819dfe6c5d68e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cs_8h.html#a24c49529cfa0ba1ada6819dfe6c5d68e">BSP430_CLOCK_PUC_MCLK_HZ</a>&#160;&#160;&#160;1048576UL</td></tr>
<tr class="separator:a24c49529cfa0ba1ada6819dfe6c5d68e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Hardware presentation/abstraction for Clock System (CS). </p>
<p>The Clock System (CS) peripheral is present in FR5xx-family devices. Variant CS is used in FR57xx devices; variant CS_A is used in FR58xx/FR59xx devices. They differ in the names for constants related to low and high frequency crystals, in the set of supported DCOCLK frequencies, and in whether DCOCLK can source ACLK.</p>
<dl class="section note"><dt>Note</dt><dd>The CS peripheral on the FR4xx/2xx-family devices is completely different and its supporting material is provided in the &lt;<a class="el" href="cs4_8h.html" title="Hardware presentation/abstraction for Clock System (CS) on FR4xx/2xx chips. ">bsp430/periph/cs4.h</a>&gt; header.</dd></dl>
<h1><a class="anchor" id="h_periph_cs_opt"></a>
Module Configuration Options</h1>
<p>None supported.</p>
<h1><a class="anchor" id="h_periph_cs_hpl"></a>
Hardware Presentation Layer</h1>
<p>As there can be only one instance of CS on any MCU, there is no structure supporting a CS HPL. Manipulate the peripheral through its registers directly.</p>
<h1><a class="anchor" id="h_periph_cs_hal"></a>
Hardware Adaptation Layer</h1>
<p>As there can be only one instance of CS on any MCU, there is no structure supporting a CS HAL.</p>
<p>The standard set of capabilities in the bsp430/clocks.h header are supported, with the following details:</p>
<ul>
<li>(CS) The peripheral supports only a few factory-trimmed frequencies: for CS these are 5.33, 6.67, and 8 MHz on low-speed devices, and additionally 16, 20, and 24 MHz on high-speed&ndash;capable devices. For CS_A these are 1, 2.67, 3.33, 4.0, 5.33, and 6.67 MHz on low-speed devices, and additionally 8, 16, 20, and 24 MHz on high-speed-capable devices. <a class="el" href="clock_8h.html#a538f01f39cf54267229fe04877d3185e">ulBSP430clockConfigureMCLK_ni()</a> will select and return the closest available frequency.</li>
</ul>
<ul>
<li>The implementation assumes that MCLK and SMCLK are both sourced from DCOCLK.</li>
</ul>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bsp430">http://github.com/pabigot/bsp430</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2012-2014, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a193ffc3b8d68bc1ec72dbeb887061af2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_CLEAR_FAULTS_NI</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                     \</div>
<div class="line">    CSCTL0_H = 0xA5;                                            <a class="code" href="cs_8h.html#a735f0669e36e96cad718a8c831a168cf">\</a></div>
<div class="line"><a class="code" href="cs_8h.html#a735f0669e36e96cad718a8c831a168cf">    BSP430_CS_CLEAR_FAULTS_NI</a>();                                \</div>
<div class="line">    CSCTL0_H = !0xA5;                                           <a class="code" href="clock_8h.html#a7c4dd20d76d5e9aab4a7f59c315706c7">\</a></div>
<div class="line"><a class="code" href="clock_8h.html#a7c4dd20d76d5e9aab4a7f59c315706c7">    BSP430_CLOCK_OSC_CLEAR_FAULT_NI</a>();                          \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="clock_8h_html_a7c4dd20d76d5e9aab4a7f59c315706c7"><div class="ttname"><a href="clock_8h.html#a7c4dd20d76d5e9aab4a7f59c315706c7">BSP430_CLOCK_OSC_CLEAR_FAULT_NI</a></div><div class="ttdeci">#define BSP430_CLOCK_OSC_CLEAR_FAULT_NI()</div><div class="ttdef"><b>Definition:</b> clock.h:230</div></div>
<div class="ttc" id="cs_8h_html_a735f0669e36e96cad718a8c831a168cf"><div class="ttname"><a href="cs_8h.html#a735f0669e36e96cad718a8c831a168cf">BSP430_CS_CLEAR_FAULTS_NI</a></div><div class="ttdeci">#define BSP430_CS_CLEAR_FAULTS_NI()</div><div class="ttdef"><b>Definition:</b> cs.h:243</div></div>
</div><!-- fragment --><p>Clear all clock faults.</p>
<p>This definition overrides the generic definition to clear the crystal-specific flags as well as the system flag.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<a class="anchor" id="a7a0cdc169aac90a5c877b3ca09a4608d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_LFXT1_IS_FAULTED_NI</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;((CSCTL4 &amp; BSP430_CS_XT1OFF_) || <a class="el" href="cs_8h.html#a02a5d0ea0118facd7fb5d4a701a98b29">BSP430_CS_LFXT1_IS_FAULTED_NI</a>())</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether the CS-controlled LFXT1 crystal has a fault condition.</p>
<dl class="section note"><dt>Note</dt><dd>Oscillator fault flags are not set unless a fault has been detected. If the crystal has never been enabled, no fault will have been detected. On power-up, the XIN function is not enabled and CSCTL4.XT1OFF is set, and BSP430 treats CSCTL4.XT1OFF as an indication that the pins are not configured for crystal use, either because LFXT1 has not been configured or has been configured and found to be faulted. Although it is perfectly acceptable to have CSCTL4.XT1OFF set and the crystal working fine, the complexity of detecting that case is not supported by this implementation.</dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="cs_8h.html#a02a5d0ea0118facd7fb5d4a701a98b29">BSP430_CS_LFXT1_IS_FAULTED_NI()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ae2ace757e68c3bc4206f0ff4a3a39d13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_NOMINAL_VLOCLK_HZ&#160;&#160;&#160;10000U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unconditional define for peripheral-specific constant </p>

</div>
</div>
<a class="anchor" id="a24c49529cfa0ba1ada6819dfe6c5d68e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_PUC_MCLK_HZ&#160;&#160;&#160;1048576UL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unconditional define for peripheral-specific constant </p>

</div>
</div>
<a class="anchor" id="aad464616a6b90463f1eae80399c34905"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_XT2_IS_FAULTED_NI</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;((CSCTL4 &amp; BSP430_CS_XT2OFF_) || <a class="el" href="cs_8h.html#ac1bbe0ef1757703626cd14953359be7e">BSP430_CS_XT2_IS_FAULTED_NI</a>())</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether the CS-controlled XT2 crystal has a fault condition.</p>
<dl class="section note"><dt>Note</dt><dd>Oscillator fault flags are not set unless a fault has been detected. If the crystal has never been enabled, no fault will have been detected. On power-up, the XT2IN function is not enabled and CSCTL4.XT2OFF is set, and BSP430 treats CSCTL4.XT2OFF as an indication that the pins are not configured for crystal use, either because XT2 has not been configured or has been configured and found to be faulted. Although it is perfectly acceptable to have CSCTL4.XT2OFF set and the crystal working fine, the complexity of detecting that case is not supported by this implementation.</dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="cs_8h.html#ac1bbe0ef1757703626cd14953359be7e">BSP430_CS_XT2_IS_FAULTED_NI()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a735f0669e36e96cad718a8c831a168cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CS_CLEAR_FAULTS_NI</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                        \</div>
<div class="line">    CSCTL5 &amp;= ~(BSP430_CS_XT2OFFG_ | BSP430_CS_XT1OFFG_);       \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment --><p>Clear all CS-specific faults.</p>
<dl class="section note"><dt>Note</dt><dd>This does not unlock the CS registers. Invoking it while registers are locked will result in a restart. </dd></dl>

</div>
</div>
<a class="anchor" id="af26ee82669de3e3582ac7e66315fe58a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CS_FRAM_NWAITS_FOR_FREQ</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">freq_</td><td>)</td>
          <td>&#160;&#160;&#160;include &lt;bsp430/platform.h&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine FRAM wait states required for clock speed.</p>
<p>This is a platform-specific macro to select the appropriate number of wait states required for reliable FRAM access when using a given system clock speed. It should be defined in the platform.h header, based on values specified in the data sheet under Recommended Operating Conditions for f_SYSTEM. A value of zero is used if a negative value is requested.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">freq_</td><td>Desired f_SYSTEM (maximum RAM access frequency)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>For FR57xx devices this macro is optional, as that family supports an automatic setting for wait states; if the macro is defined it will be used, otherwise it will not. For FR58xx devices setting wait stats manually is required, but if the macro is missing this definition will be used: </dd>
<dd>
<div class="fragment"><div class="line">#define BSP430_CS_FRAM_NWAITS_FOR_FREQ(freq_) (((int)((freq_)/8000000L)) - 1)</div>
</div><!-- fragment --></dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Though the gloss in the datasheet references MCLK, the FR58xx user's guide documents that wait states also apply to DMA, which may run at a higher speed if MCLK's divisor is greater than SMCLK's. BSP430 assumes MCLK's divisor is one, and so uses the actual configured DCO frequency to determine the wait states. This is sub-optimal, but correct, if all clocks divide that frequency.</dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl class="section user"><dt>Platform-Based Value:</dt><dd>Undefined here; include &lt;<a class="el" href="platform_8h.html" title="Entrypoint for platform-specific capabilities. ">bsp430/platform.h</a>&gt; to obtain the correct value of this macro. </dd></dl>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="cs_8h.html#a63edacf57e89b945f6edc332d26ee9de">BSP430_CS_IS_FR58XX</a> </dd></dl>

</div>
</div>
<a class="anchor" id="adbd5b34e1678b069772c9087173b9305"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CS_IS_FR57XX&#160;&#160;&#160;(defined(__MSP430_HAS_CS__) &amp;&amp; (! ((<a class="el" href="clock_8h.html#a10a2c6c45e481e819bcdf07125532f38">BSP430_PERIPH_CS_IS_CSA</a> - 0) || (<a class="el" href="clock_8h.html#a3f282e7d94c3ff64e727eb1c8135cb9d">BSP430_PERIPH_CS_IS_CS4</a> - 0))))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine whether target has a CS or CS_A peripheral.</p>
<p>This macro is defined to a true value if the target peripheral has the FR57xx variant of the CS module.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="cs_8h.html#a63edacf57e89b945f6edc332d26ee9de">BSP430_CS_IS_FR58XX</a></dd></dl>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that restricts its use to C preprocessor conditional directives. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2clocks_2main_8c-example.html#a43">bootstrap/clocks/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a63edacf57e89b945f6edc332d26ee9de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CS_IS_FR58XX&#160;&#160;&#160;(<a class="el" href="clock_8h.html#a10a2c6c45e481e819bcdf07125532f38">BSP430_PERIPH_CS_IS_CSA</a> - 0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine whether target has a CS or CS_A peripheral.</p>
<p>The base CS peripheral as defined in the FR57xx family has a different set of available clocks and differences in register layout and configurable clock rates from the variant in the FR58xx/FR59xx, which was distinguished as CS_A in the header files originally released for the Wolverine chips. Subsequently TI decided to eliminate the difference in name, while retaining the difference in interface and functionality. This occurs in public release version 1.073 of the MSP430 headers.</p>
<p>This macro is defined to a true value if the target peripheral has the FR58xx variant of the CS module. It uses <code><b>MSP430_HAS_CS_A</b></code> if available, otherwise depends on the presence of <code>DCOFSEL2</code>, a bit not available on the original CS peripheral.</p>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that restricts its use to C preprocessor conditional directives. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2clocks_2main_8c-example.html#a44">bootstrap/clocks/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a02a5d0ea0118facd7fb5d4a701a98b29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CS_LFXT1_IS_FAULTED_NI</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(CSCTL5 &amp; BSP430_CS_XT1OFFG_)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>CS-specific check for LFXT1 crystal fault condition.</p>
<p>This checks exactly for the fault condition.</p>
<dl class="section note"><dt>Note</dt><dd>A crystal that has never been enabled will not register as faulted. </dd></dl>

</div>
</div>
<a class="anchor" id="ac8d8d8e53789714997a6ff5718836359"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CS_NOMINAL_LFMODCLK_HZ&#160;&#160;&#160;(<a class="el" href="cs_8h.html#a975f44a73a1181b0fd58b353f0e49024">BSP430_CS_NOMINAL_MODCLK_HZ</a> / 128)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Nominal rate of the CS_A peripheral LFMODCLK.</p>
<p>This source exists only in the CS_A version of the CS peripheral. It is driven by an internal low-power oscillator. </p>

</div>
</div>
<a class="anchor" id="a975f44a73a1181b0fd58b353f0e49024"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CS_NOMINAL_MODCLK_HZ&#160;&#160;&#160;5000000UL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The CS_A module supports an internal low-precision high-frequency module clock source running at a nominal 5 MHz rate, for use where SMCLK is unsuitable. Its rate varies with temperature, voltage, and individual device.</p>
<p>This source exists only in the CS_A version of the CS peripheral.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<a class="anchor" id="ac1bbe0ef1757703626cd14953359be7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CS_XT2_IS_FAULTED_NI</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(CSCTL5 &amp; BSP430_CS_XT2OFFG_)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>CS-specific check for XT2 crystal fault condition.</p>
<p>If the platform does not support an XT2 crystal no fault is diagnosed.</p>
<dl class="section note"><dt>Note</dt><dd>A crystal that has never been enabled will not register as faulted. </dd></dl>

</div>
</div>
<a class="anchor" id="a6c04d4f7058250c4ab5c9d220a4234a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_MODULE_CS&#160;&#160;&#160;((<a class="el" href="cs_8h.html#adbd5b34e1678b069772c9087173b9305">BSP430_CS_IS_FR57XX</a> - 0) || (<a class="el" href="cs_8h.html#a63edacf57e89b945f6edc332d26ee9de">BSP430_CS_IS_FR58XX</a> - 0))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defined on inclusion of &lt;<a class="el" href="cs_8h.html" title="Hardware presentation/abstraction for Clock System (CS). ">bsp430/periph/cs.h</a>&gt;. The value evaluates to true if the target MCU supports the Clock System peripheral, and false if it does not.</p>
<dl class="section note"><dt>Note</dt><dd>Although TI calls it a CS module, the Clock System on the FR4xx/2xx devices is not anywhere like this one and is provided by the &lt;<a class="el" href="cs4_8h.html" title="Hardware presentation/abstraction for Clock System (CS) on FR4xx/2xx chips. ">bsp430/periph/cs4.h</a>&gt; header.</dd></dl>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that restricts its use to C preprocessor conditional directives. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 15 2014 11:27:13 for BSP430 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
