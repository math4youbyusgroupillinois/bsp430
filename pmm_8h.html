<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>BSP430: include/bsp430/periph/pmm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSP430
   &#160;<span id="projectnumber">20141115</span>
   </div>
   <div id="projectbrief">Board Support Package for MSP430 microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_62ed61ea3473d085a8b2bf70053df4f0.html">include</a></li><li class="navelem"><a class="el" href="dir_7c92f3a74acfd272e55b8e8273858819.html">bsp430</a></li><li class="navelem"><a class="el" href="dir_19e4f19d9de152fbe2728cd5df77a8c2.html">periph</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pmm.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Hardware presentation/abstraction for Power Management Module (PMM).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="periph_8h_source.html">bsp430/periph.h</a>&gt;</code><br />
</div>
<p><a href="pmm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af9f6a1ab23247e37c030abdfef888798"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#af9f6a1ab23247e37c030abdfef888798">BSP430_MODULE_PMM</a></td></tr>
<tr class="separator:af9f6a1ab23247e37c030abdfef888798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62ed8a8befdc42e680d77a22ce15fb62"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a62ed8a8befdc42e680d77a22ce15fb62">BSP430_MODULE_PMM_FRAM</a></td></tr>
<tr class="separator:a62ed8a8befdc42e680d77a22ce15fb62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d31e90b0523e0c42affa0a527b4e2f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a16d31e90b0523e0c42affa0a527b4e2f">BSP430_PMM_SUPPORTS_COREV</a>&#160;&#160;&#160;((<a class="el" href="pmm_8h.html#af9f6a1ab23247e37c030abdfef888798">BSP430_MODULE_PMM</a> - 0) &amp;&amp; ! (<a class="el" href="pmm_8h.html#a62ed8a8befdc42e680d77a22ce15fb62">BSP430_MODULE_PMM_FRAM</a> - 0))</td></tr>
<tr class="separator:a16d31e90b0523e0c42affa0a527b4e2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd93941d064db93e6bdc22771987486"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a9dd93941d064db93e6bdc22771987486">BSP430_PMM_SUPPORTS_SVSM</a>&#160;&#160;&#160;((<a class="el" href="pmm_8h.html#af9f6a1ab23247e37c030abdfef888798">BSP430_MODULE_PMM</a> - 0) &amp;&amp; ! (<a class="el" href="pmm_8h.html#a62ed8a8befdc42e680d77a22ce15fb62">BSP430_MODULE_PMM_FRAM</a> - 0))</td></tr>
<tr class="separator:a9dd93941d064db93e6bdc22771987486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77f7471bb2f76ad4c4173a9a4afa3055"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a77f7471bb2f76ad4c4173a9a4afa3055">BSP430_PMM_ENTER_LPMXp5_NI</a>()</td></tr>
<tr class="separator:a77f7471bb2f76ad4c4173a9a4afa3055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a839582a50d6aa7de06fab882543f3f01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a839582a50d6aa7de06fab882543f3f01">BSP430_PMM_CLEAR_LOCKLPM5</a>()</td></tr>
<tr class="separator:a839582a50d6aa7de06fab882543f3f01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bf0ec44ad7918e57576e4612cc307ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a0bf0ec44ad7918e57576e4612cc307ae">BSP430_PMM_SET_SVSMCTL_NI</a>(hctl_,  lctl_)</td></tr>
<tr class="separator:a0bf0ec44ad7918e57576e4612cc307ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a812275ab49340952a56211501f9d232d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a812275ab49340952a56211501f9d232d">BSP430_PMM_COREV_FOR_MCLK</a>(mclk_)&#160;&#160;&#160;include &lt;bsp430/platform.h&gt;</td></tr>
<tr class="separator:a812275ab49340952a56211501f9d232d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abaec56228be231bba18d6edd8b505869"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#abaec56228be231bba18d6edd8b505869">vBSP430pmmInduceBOR</a> (void)</td></tr>
<tr class="separator:abaec56228be231bba18d6edd8b505869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a168885116eb851452f51b7ce7ae1b3c5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a168885116eb851452f51b7ce7ae1b3c5">vBSP430pmmInducePOR</a> (void)</td></tr>
<tr class="separator:a168885116eb851452f51b7ce7ae1b3c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3621d45ad0e516384a5dce097dadba9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#ac3621d45ad0e516384a5dce097dadba9">iBSP430pmmSetCoreVoltageLevel_ni</a> (unsigned int target_level)</td></tr>
<tr class="separator:ac3621d45ad0e516384a5dce097dadba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Hardware presentation/abstraction for Power Management Module (PMM). </p>
<p>The Power Management Module is present on 5xx/6xx/FR5xx devices, and has differences in FRAM devices that are not reflected by this interface.</p>
<h1><a class="anchor" id="h_periph_pmm_opt"></a>
Module Configuration Options</h1>
<p>None supported.</p>
<h1><a class="anchor" id="h_periph_pmm_hpl"></a>
Hardware Presentation Layer</h1>
<p>As there can be only one instance of PMM on any MCU, there is no structure supporting a PMM <a class="el" href="layer.html#HPL">HPL</a>. Manipulate the peripheral through its registers directly.</p>
<h1><a class="anchor" id="h_periph_pmm_hal"></a>
Hardware Adaptation Layer</h1>
<p>As there can be only one instance of PMM on any MCU, there is no structure supporting a PMM <a class="el" href="layer.html#HAL">HAL</a>.</p>
<p>Inline functions defined in this module support forcing processor resets that include a complete reset of all registers and peripherals.</p>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bsp430">http://github.com/pabigot/bsp430</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2012-2014, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="af9f6a1ab23247e37c030abdfef888798"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_MODULE_PMM</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(defined(__MSP430_HAS_PMM__)          \</div>
<div class="line">                           || defined(__MSP430_HAS_PMM_FR5xx__) \</div>
<div class="line">                           || defined(__MSP430_HAS_PMM_FRAM__))</div>
</div><!-- fragment --><p>Defined on inclusion of &lt;<a class="el" href="pmm_8h.html" title="Hardware presentation/abstraction for Power Management Module (PMM). ">bsp430/periph/pmm.h</a>&gt;. The value evaluates to true if the target MCU supports the Power Management Module, and false if it does not.</p>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that restricts its use to C preprocessor conditional directives. </dd></dl>

</div>
</div>
<a class="anchor" id="a62ed8a8befdc42e680d77a22ce15fb62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_MODULE_PMM_FRAM</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(defined(__MSP430_HAS_PMM_FR5xx__)       \</div>
<div class="line">                                || defined(__MSP430_HAS_PMM_FRAM__))</div>
</div><!-- fragment --><p>Defined on inclusion of &lt;<a class="el" href="pmm_8h.html" title="Hardware presentation/abstraction for Power Management Module (PMM). ">bsp430/periph/pmm.h</a>&gt;. The value evaluates to true if the target MCU supports the FRAM version of the Power Management Module, and false if it does not.</p>
<dl class="section note"><dt>Note</dt><dd>The FRAM version of the PMM does not support the supply voltage supervisory and monitoring capabilities.</dd></dl>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that restricts its use to C preprocessor conditional directives. </dd></dl>

</div>
</div>
<a class="anchor" id="a839582a50d6aa7de06fab882543f3f01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_PMM_CLEAR_LOCKLPM5</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">    PMMCTL0_H = PMMPW_H;                 \</div>
<div class="line">    PM5CTL0 &amp;= ~<a class="code" href="msp430_8h.html#ae5ced65b3157bff07c84be399063da5c">LOCKLPM5</a>;                \</div>
<div class="line">    PMMCTL0_H = !PMMPW_H;                \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="msp430_8h_html_ae5ced65b3157bff07c84be399063da5c"><div class="ttname"><a href="msp430_8h.html#ae5ced65b3157bff07c84be399063da5c">LOCKLPM5</a></div><div class="ttdeci">#define LOCKLPM5</div><div class="ttdef"><b>Definition:</b> msp430.h:254</div></div>
</div><!-- fragment --><p>Macro to clear the LOCKLPM5 bit.</p>
<p>In the current FR58xx family this bit is set on power-up, even if not waking from LPM3.5 or LPM4.5. Since <a class="el" href="platform_8h.html#a616515ce5e0f7635ca36a815841d2a21">vBSP430platformInitialize_ni()</a> is supposed to configure things like LEDs, this bit needs to be cleared for normal startup.</p>
<dl class="section note"><dt>Note</dt><dd>Although this bit may be cleared without locking the PMM registers on some FR58xx devices, on other devices the lock is required. On some non-FRAM devices with the PMM module, the bit does not even exist. This macro exists on all MCUs for which <a class="el" href="pmm_8h.html#af9f6a1ab23247e37c030abdfef888798">BSP430_MODULE_PMM</a> is enabled; it is a no-op if the bit is not supported.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The implementation assumes that the PMM control registers are locked. The macro will unlock the registers, set the bit for LPMx.5, then lock the registers again. If used in a context where the PMM registers are already unlocked, this will probably not be what you want.</dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl class="section user"><dt>Platform-Specific Value:</dt><dd>The value here is an example, and may differ from the actual value used depending on platform information. </dd></dl>

</div>
</div>
<a class="anchor" id="a812275ab49340952a56211501f9d232d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_PMM_COREV_FOR_MCLK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mclk_</td><td>)</td>
          <td>&#160;&#160;&#160;include &lt;bsp430/platform.h&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine PMM core voltage setting for clock speed.</p>
<p>This is a platform-specific macro to select the appropriate parameter for <a class="el" href="pmm_8h.html#ac3621d45ad0e516384a5dce097dadba9">iBSP430pmmSetCoreVoltageLevel_ni()</a> based on a desired system clock speed. It should be defined in the platform.h header, based on values specified in the data sheet under Recommended Operating Conditions for f_SYSTEM.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mclk_</td><td>Desired f_SYSTEM (maximum MCLK frequency)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl class="section user"><dt>Platform-Based Value:</dt><dd>Undefined here; include &lt;<a class="el" href="platform_8h.html" title="Entrypoint for platform-specific capabilities. ">bsp430/platform.h</a>&gt; to obtain the correct value of this macro. </dd></dl>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="pmm_8h.html#a16d31e90b0523e0c42affa0a527b4e2f">BSP430_PMM_SUPPORTS_COREV</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a77f7471bb2f76ad4c4173a9a4afa3055"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_PMM_ENTER_LPMXp5_NI</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {       \</div>
<div class="line">    PMMCTL0_H = PMMPW_H;                        \</div>
<div class="line">    PMMCTL0 = PMMPW | PMMREGOFF;                \</div>
<div class="line">    PMMCTL0_H = !PMMPW_H;                       \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment --><p>Macro to enter LPMx.5 mode</p>
<p>This should be invoked when <a class="el" href="core_8h.html#ac98f22bd2238bfdadf9c7d2a7a8bcc8f">BSP430_CORE_LPM_LPMXp5</a> or some other cue indicates that ultra-low-power sleep is desired.</p>
<dl class="section note"><dt>Note</dt><dd>This macro is unavailable on 5xx/6xx chips for which PM5CTL0 is not provided by the MCU headers, possibly due to the presence of erratum PMM8. In particular, it is not available on the CC430F5137 used in the EM430 and SuRF platforms. User code can test whether the macro is defined in order to determine whether the feature is supported.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The implementation assumes that the PMM control registers are locked. The macro will unlock the registers, set the bit for LPMx.5, then lock the registers again. If used in a context where the PMM registers are already unlocked, this will probably not be what you want. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a69">bootstrap/applpm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a0bf0ec44ad7918e57576e4612cc307ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_PMM_SET_SVSMCTL_NI</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hctl_, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">lctl_&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {   \</div>
<div class="line">    PMMCTL0_H = PMMPW_H;                              <a class="code" href="msp430_8h.html#ac11a993ad6c277854031e52bd2b1c4c1">\</a></div>
<div class="line"><a class="code" href="msp430_8h.html#ac11a993ad6c277854031e52bd2b1c4c1">    SVSMHCTL</a> = (hctl_);                               <a class="code" href="msp430_8h.html#a851565872e6d9b1b747449156a44d81d">\</a></div>
<div class="line"><a class="code" href="msp430_8h.html#a851565872e6d9b1b747449156a44d81d">    SVSMLCTL</a> = (lctl_);                               \</div>
<div class="line">    PMMCTL0_H = !PMMPW_H;                             \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="msp430_8h_html_a851565872e6d9b1b747449156a44d81d"><div class="ttname"><a href="msp430_8h.html#a851565872e6d9b1b747449156a44d81d">SVSMLCTL</a></div><div class="ttdeci">unsigned int SVSMLCTL</div></div>
<div class="ttc" id="msp430_8h_html_ac11a993ad6c277854031e52bd2b1c4c1"><div class="ttname"><a href="msp430_8h.html#ac11a993ad6c277854031e52bd2b1c4c1">SVSMHCTL</a></div><div class="ttdeci">unsigned int SVSMHCTL</div></div>
</div><!-- fragment --><p>Macro to set the <a class="el" href="msp430_8h.html#a851565872e6d9b1b747449156a44d81d">SVSMLCTL</a> and <a class="el" href="msp430_8h.html#a851565872e6d9b1b747449156a44d81d">SVSMLCTL</a> registers</p>
<p>The Supply Voltage Supervisor and Monitor High- and Low-Side Control registers affect the time required for waking from low power modes and the level of power consumption used. Information on timing and power consumption is in the MCU-specific data sheet.</p>
<p>To disable the supervisor and monitor without changing any other configuration, resulting in lowest power use and fastest wakeup, use:</p>
<div class="fragment"><div class="line">#if (BSP430_PMM_SUPPORTS_SVSM - 0)</div>
<div class="line">BSP430_PMM_SET_SVSMCTL_NI(SVSMHCTL &amp; ~(SVMHE | SVSHE), SVSMLCTL &amp; ~(SVMLE | SVSLE));</div>
<div class="line">#endif // BSP430_PMM_SUPPORTS_SVSM</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hctl_</td><td>The new value for <a class="el" href="msp430_8h.html#ac11a993ad6c277854031e52bd2b1c4c1">SVSMHCTL</a>, e.g. <code><a class="el" href="msp430_8h.html#ac11a993ad6c277854031e52bd2b1c4c1">SVSMHCTL</a> &amp; ~(<a class="el" href="msp430_8h.html#a79ec91d113a53e08d99d7df061bb99cc">SVMHE</a> | <a class="el" href="msp430_8h.html#aa303492df56594c301a5d90a85dfcfce">SVSHE</a>)</code> </td></tr>
    <tr><td class="paramname">lctl_</td><td>The new value for <a class="el" href="msp430_8h.html#a851565872e6d9b1b747449156a44d81d">SVSMLCTL</a>, e.g. <code><a class="el" href="msp430_8h.html#a851565872e6d9b1b747449156a44d81d">SVSMLCTL</a> &amp; ~(<a class="el" href="msp430_8h.html#a80f9b1f14a3e0b92470f442c97da6688">SVMLE</a> | <a class="el" href="msp430_8h.html#a775b67a8c2df6ecf7225c8de70631ead">SVSLE</a>)</code></td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Changing any other flags, but particularly the core voltage, may requires care to wait for stability before making changes. See <a class="el" href="pmm_8h.html#ac3621d45ad0e516384a5dce097dadba9">iBSP430pmmSetCoreVoltageLevel_ni()</a> and the peripheral documentation, errata, and application notes.</dd></dl>
<dl class="section user"><dt>For wake-up</dt><dd></dd></dl>
<p>Each data sheet will specify <em>t_WAKE-UP-FAST</em> (~5 us MSP430F5438A) and <em>t_WAKE-UP-SLOW</em> (~150 us MSP430F5438A), which are the time to move from LPM2, LPM3, or LPM4 to active mode (MCLK running). In the power-on configuration <em>t_WAKE-UP-SLOW</em> will be on by default, resulting in significant delays in interrupt handling, as demonstrated by <code>examples/platform/timer_lpm</code>. Only <a class="el" href="msp430_8h.html#a851565872e6d9b1b747449156a44d81d">SVSMLCTL</a> affects wakeup time.</p>
<dl class="section user"><dt>For power consumption</dt><dd></dd></dl>
<p>Enabling the SVS increases power consumption (200 nA for MSP430F5438A). In full-performance mode the cost is higher (1.5 uA for MSP430F5438A). The cost is listed in the data sheet in the separately for each of high and low cross supervisory and monitoring functions. Initial experimentation suggests that disabling all four capabilities reduces current by only 3uA in LPM3, though more may be reduced when active.</p>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="pmm_8h.html#a9dd93941d064db93e6bdc22771987486">BSP430_PMM_SUPPORTS_SVSM</a> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a42">bootstrap/applpm/main.c</a>, <a class="el" href="periph_2timer_2alarm_2main_8c-example.html#a52">periph/timer/alarm/main.c</a>, and <a class="el" href="utility_2cli_2main_8c-example.html#a44">utility/cli/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a16d31e90b0523e0c42affa0a527b4e2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_PMM_SUPPORTS_COREV&#160;&#160;&#160;((<a class="el" href="pmm_8h.html#af9f6a1ab23247e37c030abdfef888798">BSP430_MODULE_PMM</a> - 0) &amp;&amp; ! (<a class="el" href="pmm_8h.html#a62ed8a8befdc42e680d77a22ce15fb62">BSP430_MODULE_PMM_FRAM</a> - 0))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defined to a preprocessor true value when the PMM modules supports adjusting core voltage.</p>
<p>This is limited to MCUs that have the PMM module and are not FRAM devices.</p>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that restricts its use to C preprocessor conditional directives. </dd></dl>

</div>
</div>
<a class="anchor" id="a9dd93941d064db93e6bdc22771987486"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_PMM_SUPPORTS_SVSM&#160;&#160;&#160;((<a class="el" href="pmm_8h.html#af9f6a1ab23247e37c030abdfef888798">BSP430_MODULE_PMM</a> - 0) &amp;&amp; ! (<a class="el" href="pmm_8h.html#a62ed8a8befdc42e680d77a22ce15fb62">BSP430_MODULE_PMM_FRAM</a> - 0))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defined to a preprocessor true value when the PMM modules supports the supply voltage supervisor and monitor functions.</p>
<p>This is limited to MCUs that have the PMM module and are not FRAM devices.</p>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that restricts its use to C preprocessor conditional directives. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac3621d45ad0e516384a5dce097dadba9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430pmmSetCoreVoltageLevel_ni </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>target_level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Safely adjust the PMM core voltage to a desired level.</p>
<p>This function gradually increases or decreases the PMM core voltage to the desired level, or as close to it as can be achieved. The implementation is from <a href="http://www.ti.com/tool/msp430ware">MSP430Ware</a>, and includes a workaround for erratum FLASH37. If supply voltage does not support the requested voltage, the closest attainable level will be configured and returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_level</td><td>The power level to be entered. This must be a valid level, i.e. <a class="el" href="msp430_8h.html#a34ca0e5c11c8b5df96c3c0897728ca8f">PMMCOREV_0</a> through <a class="el" href="msp430_8h.html#a4aa3f2a0135a48433168c58a596e88da">PMMCOREV_3</a>, or an error code is returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if the <code>target_level</code> is invalid, otherwise the level at which power is left. This may be less than <code>target_level</code> if the requested level could not be reached due to inadequate supply voltage.</dd></dl>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="pmm_8h.html#a16d31e90b0523e0c42affa0a527b4e2f">BSP430_PMM_SUPPORTS_COREV</a> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a63">bootstrap/applpm/main.c</a>, and <a class="el" href="platform_2exp430f5529_2fatfs_2main_8c-example.html#a11">platform/exp430f5529/fatfs/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="abaec56228be231bba18d6edd8b505869"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> void vBSP430pmmInduceBOR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Cause a brown-out reset </p>

</div>
</div>
<a class="anchor" id="a168885116eb851452f51b7ce7ae1b3c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> void vBSP430pmmInducePOR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Cause a power-on reset </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 15 2014 11:27:13 for BSP430 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
