<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>BSP430: include/bsp430/utility/onewire.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSP430
   &#160;<span id="projectnumber">20141115</span>
   </div>
   <div id="projectbrief">Board Support Package for MSP430 microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_62ed61ea3473d085a8b2bf70053df4f0.html">include</a></li><li class="navelem"><a class="el" href="dir_7c92f3a74acfd272e55b8e8273858819.html">bsp430</a></li><li class="navelem"><a class="el" href="dir_4d13793df383114196391927751b44a0.html">utility</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">onewire.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Basic support for 1-Wire(R) communications.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="port_8h_source.html">bsp430/periph/port.h</a>&gt;</code><br />
</div>
<p><a href="onewire_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsBSP430onewireSerialNumber.html">sBSP430onewireSerialNumber</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0fd51998f2d87ffa3085ddca061ed4bf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a0fd51998f2d87ffa3085ddca061ed4bf">BSP430_ONEWIRE_xCel_TO_ddegF</a>(xcel_)&#160;&#160;&#160;(320 + ((9 * (xcel_)) / 8))</td></tr>
<tr class="separator:a0fd51998f2d87ffa3085ddca061ed4bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64ed0b222bd6785a78f963ad2a002ae5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a64ed0b222bd6785a78f963ad2a002ae5">BSP430_ONEWIRE_xCel_TO_dK</a>(xcel_)&#160;&#160;&#160;((21852U + 5U * (xcel_)) / 8U)</td></tr>
<tr class="separator:a64ed0b222bd6785a78f963ad2a002ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a070da854f2fa1f3927d626e02f20e50f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a070da854f2fa1f3927d626e02f20e50f">sBSP430onewireBus</a></td></tr>
<tr class="separator:a070da854f2fa1f3927d626e02f20e50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbba8ba6511cee0ac789115cf3c3fc9b"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsBSP430onewireSerialNumber.html">sBSP430onewireSerialNumber</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#abbba8ba6511cee0ac789115cf3c3fc9b">sBSP430onewireSerialNumber</a></td></tr>
<tr class="separator:abbba8ba6511cee0ac789115cf3c3fc9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a8628933cde20921c453a6d2607bdad62"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="onewire_8h.html#a8628933cde20921c453a6d2607bdad62a60f9e2a5bba3b3bd8c2d792000d88e31">BSP430_ONEWIRE_CMD_READ_ROM</a> = 0x33, 
<a class="el" href="onewire_8h.html#a8628933cde20921c453a6d2607bdad62a2a898fe3f4a2f201aada6440e5924e63">BSP430_ONEWIRE_CMD_SKIP_ROM</a> = 0xcc, 
<a class="el" href="onewire_8h.html#a8628933cde20921c453a6d2607bdad62aa6f389364e0da7d2b320a8d269a9fabb">BSP430_ONEWIRE_CMD_READ_POWER_SUPPLY</a> = 0xb4, 
<a class="el" href="onewire_8h.html#a8628933cde20921c453a6d2607bdad62aefae19a8200ec44875d4b3a0aaf80f2c">BSP430_ONEWIRE_CMD_RECALL_EE</a> = 0xb8, 
<br />
&#160;&#160;<a class="el" href="onewire_8h.html#a8628933cde20921c453a6d2607bdad62a04017905ef6495033238818d08b842df">BSP430_ONEWIRE_CMD_READ_SCRATCHPAD</a> = 0xbe, 
<a class="el" href="onewire_8h.html#a8628933cde20921c453a6d2607bdad62a7ff0f82564acda535fba12dc3d203438">BSP430_ONEWIRE_CMD_CONVERT_T</a> = 0x44
<br />
 }</td></tr>
<tr class="separator:a8628933cde20921c453a6d2607bdad62"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8dddf72d73da142236207efa28d09c44"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a8dddf72d73da142236207efa28d09c44">iBSP430onewireReset_ni</a> (const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *bus)</td></tr>
<tr class="separator:a8dddf72d73da142236207efa28d09c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c380b1a38bf46767c9e804183175ae9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a3c380b1a38bf46767c9e804183175ae9">vBSP430onewireShutdown_ni</a> (const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *bus)</td></tr>
<tr class="separator:a3c380b1a38bf46767c9e804183175ae9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a661a5fe53681226c5ce0dbe156cb990f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a661a5fe53681226c5ce0dbe156cb990f">vBSP430onewireWriteByte_ni</a> (const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *bus, int byte)</td></tr>
<tr class="separator:a661a5fe53681226c5ce0dbe156cb990f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8e6ed1419929468ea797c1802f6ebc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a2f8e6ed1419929468ea797c1802f6ebc">iBSP430onewireReadBit_ni</a> (const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *bus)</td></tr>
<tr class="separator:a2f8e6ed1419929468ea797c1802f6ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d4e1100b43ccd4591e0ced0dca6ca2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#aa2d4e1100b43ccd4591e0ced0dca6ca2">iBSP430onewireReadByte_ni</a> (const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *bus)</td></tr>
<tr class="separator:aa2d4e1100b43ccd4591e0ced0dca6ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0560fbd32faeeac9abc070fe88416905"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a0560fbd32faeeac9abc070fe88416905">iBSP430onewireComputeCRC</a> (const unsigned char *data, int len)</td></tr>
<tr class="separator:a0560fbd32faeeac9abc070fe88416905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37588f8966ba3a6ec70da4f10c86ca4f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a37588f8966ba3a6ec70da4f10c86ca4f">iBSP430onewireReadSerialNumber</a> (const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *bus, <a class="el" href="structsBSP430onewireSerialNumber.html">sBSP430onewireSerialNumber</a> *snp)</td></tr>
<tr class="separator:a37588f8966ba3a6ec70da4f10c86ca4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5602c6410b57640b82025310a2bbe1c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a5602c6410b57640b82025310a2bbe1c3">iBSP430onewireReadPowerSupply</a> (const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *bus)</td></tr>
<tr class="separator:a5602c6410b57640b82025310a2bbe1c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add5078955c0e48264eed9a65763925cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#add5078955c0e48264eed9a65763925cc">iBSP430onewireRequestTemperature_ni</a> (const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *bus)</td></tr>
<tr class="separator:add5078955c0e48264eed9a65763925cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e3baedf70b47aeb46cd6e8875800b8e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a8e3baedf70b47aeb46cd6e8875800b8e">iBSP430onewireTemperatureReady_ni</a> (const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *bus)</td></tr>
<tr class="separator:a8e3baedf70b47aeb46cd6e8875800b8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a586ac794112164ca1df2538f5874c6f7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="onewire_8h.html#a586ac794112164ca1df2538f5874c6f7">iBSP430onewireReadTemperature_ni</a> (const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *bus, int *temp_xCel)</td></tr>
<tr class="separator:a586ac794112164ca1df2538f5874c6f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Basic support for 1-Wire(R) communications. </p>
<p>This currently supports enough to use DS18X one-wire temperature sensors with a dedicated bus and external power. Multiple devices on the bus, and parasite powered devices, have not been tested.</p>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bsp430">http://github.com/pabigot/bsp430</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2012-2014, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a0fd51998f2d87ffa3085ddca061ed4bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_ONEWIRE_xCel_TO_ddegF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xcel_</td><td>)</td>
          <td>&#160;&#160;&#160;(320 + ((9 * (xcel_)) / 8))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert temperature from 1/16th Cel to tenths Fahrhenheit (d[degF])</p>
<p>For those of us who live in the US.</p>
<p>9 * t / 8 == (9/5) * 10 * (t / 16) without incidental overflow </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2ds18b20_2main_8c-example.html#a26">sensors/ds18b20/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a64ed0b222bd6785a78f963ad2a002ae5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_ONEWIRE_xCel_TO_dK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">xcel_</td><td>)</td>
          <td>&#160;&#160;&#160;((21852U + 5U * (xcel_)) / 8U)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert temperature from 1/16th Cel to tenths Kelvin (dK)</p>
<p>For those of us who obey the instruction of the <a href="http://unitsofmeasure.org/ucum.html">Unified Code for Units of Measure</a></p>
<p>10 * (273.15 + x / 16) = (16*27315 + 100*x) / 160 = (437040 + 100 * x) / 160 = (21852 + 5 * x) / 8 </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a070da854f2fa1f3927d626e02f20e50f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a>  <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Structure identifying 1-wire bus information. </p>

</div>
</div>
<a class="anchor" id="abbba8ba6511cee0ac789115cf3c3fc9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsBSP430onewireSerialNumber.html">sBSP430onewireSerialNumber</a>  <a class="el" href="structsBSP430onewireSerialNumber.html">sBSP430onewireSerialNumber</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Structure holding a 1-wire serial number. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a8628933cde20921c453a6d2607bdad62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a8628933cde20921c453a6d2607bdad62a60f9e2a5bba3b3bd8c2d792000d88e31"></a>BSP430_ONEWIRE_CMD_READ_ROM&#160;</td><td class="fielddoc">
<p>Read 64-bit ROM code without using search procedure </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8628933cde20921c453a6d2607bdad62a2a898fe3f4a2f201aada6440e5924e63"></a>BSP430_ONEWIRE_CMD_SKIP_ROM&#160;</td><td class="fielddoc">
<p>Skip ROM sends the following command to all bus devices </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8628933cde20921c453a6d2607bdad62aa6f389364e0da7d2b320a8d269a9fabb"></a>BSP430_ONEWIRE_CMD_READ_POWER_SUPPLY&#160;</td><td class="fielddoc">
<p>Determine whether device is parasite-powered or external-powered </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8628933cde20921c453a6d2607bdad62aefae19a8200ec44875d4b3a0aaf80f2c"></a>BSP430_ONEWIRE_CMD_RECALL_EE&#160;</td><td class="fielddoc">
<p>Store data from EEPROM into RAM </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8628933cde20921c453a6d2607bdad62a04017905ef6495033238818d08b842df"></a>BSP430_ONEWIRE_CMD_READ_SCRATCHPAD&#160;</td><td class="fielddoc">
<p>Read the RAM area. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8628933cde20921c453a6d2607bdad62a7ff0f82564acda535fba12dc3d203438"></a>BSP430_ONEWIRE_CMD_CONVERT_T&#160;</td><td class="fielddoc">
<p>Initiate a temperature conversion.</p>
<p>Be aware that temperature conversion can take up to 750ms at the default 12-bit resolution.</p>
<p>For an externally (non-parasite) powered sensor, the caller may use <a class="el" href="onewire_8h.html#a2f8e6ed1419929468ea797c1802f6ebc">iBSP430onewireReadBit_ni</a> to determine whether the conversion has completed. Completion is indicated when the device responds with a 1. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0560fbd32faeeac9abc070fe88416905"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430onewireComputeCRC </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate the CRC over the data.</p>
<p>When the last byte of the data is the CRC of the preceding bytes, the return value of this function should be zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>data for which CRC is desired</td></tr>
    <tr><td class="paramname">len</td><td>the number of bytes that contribute to CRC calculation</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the calculated CRC value </dd></dl>

</div>
</div>
<a class="anchor" id="a2f8e6ed1419929468ea797c1802f6ebc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430onewireReadBit_ni </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a bit from the 1-wire bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The port and bit identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The value of the bit read (0 or 1). </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2ds18b20_2main_8c-example.html#a21">sensors/ds18b20/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="aa2d4e1100b43ccd4591e0ced0dca6ca2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430onewireReadByte_ni </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a byte from the 1-wire bus.</p>
<p>Invokes <a class="el" href="onewire_8h.html#a2f8e6ed1419929468ea797c1802f6ebc">iBSP430onewireReadBit_ni</a> eight times to read the data, least significant bit first.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The port and bit identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The value of the byte read (0 to 255). </dd></dl>

</div>
</div>
<a class="anchor" id="a5602c6410b57640b82025310a2bbe1c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430onewireReadPowerSupply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine whether device is externally powered or uses parasite power.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The port and bit identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if the bus is externally powered; 0 if the bus is parasitically powered; a negative value if an error is encountered. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2ds18b20_2main_8c-example.html#a14">sensors/ds18b20/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a37588f8966ba3a6ec70da4f10c86ca4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430onewireReadSerialNumber </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsBSP430onewireSerialNumber.html">sBSP430onewireSerialNumber</a> *&#160;</td>
          <td class="paramname"><em>snp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the serial number from a 1-wire device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The port and bit identifying the 1-wire bus</td></tr>
    <tr><td class="paramname">snp</td><td>Pointer to where the serial number should be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the serial number was successfully read; -1 if an error occurred. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2ds18b20_2main_8c-example.html#a15">sensors/ds18b20/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a586ac794112164ca1df2538f5874c6f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430onewireReadTemperature_ni </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>temp_xCel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the most recent temperature measurement</p>
<p>The temperature is a signed 16-bit value representing 1/16th degrees Celcius. I.e., a value of 1 is 0.0625 Cel.</p>
<dl class="section note"><dt>Note</dt><dd>The accuracy and precision of the measurement are much more coarse than its resolution.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The port and bit identifying the 1-wire bus</td></tr>
    <tr><td class="paramname">temp_xCel</td><td>Pointer to a location into which the temperature will be written. This must not be null.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the read was successful; -1 if an error occurred. If there was an error, the value pointed to by temp_xCel remains unchanged. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2ds18b20_2main_8c-example.html#a23">sensors/ds18b20/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="add5078955c0e48264eed9a65763925cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430onewireRequestTemperature_ni </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send the command sequence to initiate a temperature measurement</p>
<p>Note that this simply requests that the device start to measure the temperature. The measurement process may take up to 750 msec at the default 12-bit resolution.</p>
<p>If the device is externally powered, <a class="el" href="onewire_8h.html#a8e3baedf70b47aeb46cd6e8875800b8e">iBSP430onewireTemperatureReady_ni()</a> can be invoked to determine whether the requested measurement has completed. If using parasitic power, the application should wait for at least the maximum sample time before invoking <a class="el" href="onewire_8h.html#a586ac794112164ca1df2538f5874c6f7">iBSP430onewireReadTemperature_ni()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The port and bit identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the request was successfully submitted, -1 if an error occured. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2ds18b20_2main_8c-example.html#a18">sensors/ds18b20/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a8dddf72d73da142236207efa28d09c44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430onewireReset_ni </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the bus and check for device presence.</p>
<p>This executes the 1-wire bus reset protocol, then detects whether a 1-wire device is present. The protocol requires that the bus be held low for a given period, then returns it to pullup input. A device present on the bus will respond by pulling the bus low.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The port and bit identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if no device was detected, 1 if a device responded to the reset. </dd></dl>

</div>
</div>
<a class="anchor" id="a8e3baedf70b47aeb46cd6e8875800b8e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> int iBSP430onewireTemperatureReady_ni </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Test whether the device has completed measuring the temperature</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The port and bit identifying the 1-wire bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Do not invoke this for parasitically-powered devices. See <a class="el" href="onewire_8h.html#add5078955c0e48264eed9a65763925cc">iBSP430onewireRequestTemperature_ni()</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the device is still busy; 1 if the sample is ready. </dd></dl>

</div>
</div>
<a class="anchor" id="a3c380b1a38bf46767c9e804183175ae9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSP430onewireShutdown_ni </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure the bus pin for low power mode.</p>
<p>This reconfigures the port as output low. Note that this affects the MCU power, not the device power. It does remove power from parasitic devices, but externally powered devices will still draw some amount of current.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The port and bit identifying the 1-wire bus </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2ds18b20_2main_8c-example.html#a27">sensors/ds18b20/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a661a5fe53681226c5ce0dbe156cb990f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSP430onewireWriteByte_ni </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsBSP430onewireBus.html">sBSP430onewireBus</a> *&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>byte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a byte onto the 1-wire bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>The port and bit identifying the 1-wire bus</td></tr>
    <tr><td class="paramname">byte</td><td>The value to be written. The low 8 bits are transmitted LSB-first. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 15 2014 11:27:13 for BSP430 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
